/*!
  * domready (c) Dustin Diaz 2012 - License MIT
  */
!function(a,b){if(typeof module!="undefined"){module.exports=b()}else{if(typeof define=="function"&&typeof define.amd=="object"){define(b)}else{this[a]=b()}}}("domready",function(i){var n=[],h,g=false,j=document,b=j.documentElement,m=b.doScroll,a="DOMContentLoaded",c="addEventListener",l="onreadystatechange",e="readyState",d=/^loade|c/.test(j[e]);function k(o){d=1;while(o=n.shift()){o()}}j[c]&&j[c](a,h=function(){j.removeEventListener(a,h,g);k()},g);m&&j.attachEvent(l,h=function(){if(/^c/.test(j[e])){j.detachEvent(l,h);k()}});return(i=m?function(f){self!=top?d?f():n.push(f):function(){try{b.doScroll("left")}catch(o){return setTimeout(function(){i(f)},50)}f()}()}:function(f){d?f():n.push(f)})});function doTemplate(a,c){for(var b in c){a=a.replace(new RegExp("{"+b+"}","g"),c[b])}return a}function microAjax(c,a){this.bindFunction=function(d,e){return function(){return d.apply(e,[e])}};this.stateChange=function(d){if(this.request.readyState==4){this.callbackFunction(this.request.responseText)}};this.getRequest=function(){if(window.ActiveXObject){return new ActiveXObject("Microsoft.XMLHTTP")}else{if(window.XMLHttpRequest){return new XMLHttpRequest()}}return false};this.postBody=(arguments[2]||"");this.callbackFunction=a;this.url=c;this.request=this.getRequest();if(this.request){var b=this.request;b.onreadystatechange=this.bindFunction(this.stateChange,this);if(this.postBody!==""){b.open("POST",c,true);b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.setRequestHeader("Content-type","application/x-www-form-urlencoded");b.setRequestHeader("Connection","close")}else{b.open("GET",c,true)}b.send(this.postBody)}}if("function"!=typeof microAjax){console.log("missing microAjax")}if("function"!=typeof doTemplate){console.log("missing tweettemplate")}if("function"!=typeof domready){console.log("missing domready")}var PhoneList={};PhoneList.data={};PhoneList.view={};PhoneList.data.ready=function(){domready(function(){PhoneList.view.fillContactList()})};PhoneList.view.fillContactList=function(){var a=document.getElementById("contacts");if("object"==typeof a){var b=PhoneList.data.contacts.length;while(b--){a.innerHTML+=doTemplate('<span style="display: block;">{vorname} {nachname}</span>',PhoneList.data.contacts[b])}}};PhoneList.data.retrieveContacts=(function(){var a=localStorage.getItem("contacts");if(null!==a){PhoneList.data.contacts=JSON.parse(a)}else{microAjax("mock/phoneMock.json",function(b){PhoneList.data.contacts=JSON.parse(b);localStorage.setItem("contacts",b)})}PhoneList.data.ready()})();